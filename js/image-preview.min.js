function ImagePreview(e){this.defaultOptions={el:null,naslov:"Move the image here or click to upload",noimage:"Invalid image. ",image:"",dataurl:"",onChange:null},this.config=Object.assign({},this.defaultOptions,e||{}),null!==this.config.el&&(this.dataurl="",this.imageid=null,this.imageName="",this.imageext="",this.file="",this.ToBase64="",this.selectElement="string"==typeof this.config.el?document.querySelector(this.config.el):this.config.el,this.create())}ImagePreview.prototype.clear=function(){document.querySelector(".image-preview-render").innerHTML="",document.querySelector("#"+this.imageid).value=""},ImagePreview.prototype.add=function(e,t){return this.imageName=t,this.imageext=t.split(".").pop(),this.file=e,new Promise((t,i)=>{let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{this.dataurl=a.result,"function"==typeof this.config.onChange&&this.config.onChange(this.imageName,this.imageext,this.dataurl,this.file,this)},a.onerror=i})},ImagePreview.prototype.getBase64=function(){return this.dataurl},ImagePreview.prototype.getExt=function(){return this.imageext},ImagePreview.prototype.getName=function(){return this.imageName},ImagePreview.prototype.getFile=function(){return this.file},ImagePreview.prototype.create=function(){if(null===this.config.el)return;let e=this.selectElement.getAttribute("name");this.imageid=this.selectElement.getAttribute("id");let t=this.selectElement.getAttribute("accept");null===this.imageid&&(this.imageid=e),null===t&&(t="image/png, image/jpeg, image/webp");let i='<div class="image-preview-message" id="message'+this.imageid+'">		 <p>'+this.config.naslov+'</p>	 </div>	<span class="image-preview-render render'+this.imageid+'" >';""!=this.config.image&&(i+='<img src="'+this.config.image+'" >'),i+='</span>	 <input type="file" id="'+this.imageid+'" name="'+e+'" accept="'+t+'" >';let a=document.createElement("div");a.classList.add("image-preview-wrapper"),a.innerHTML=i,this.selectElement.replaceWith(a),$this=this,document.querySelector("#"+this.imageid).onchange=function(e){var t=e.target.files[0]||e.dataTransfer.files[0];e.preventDefault();var i=t.name;let a=$(this).attr("id");document.querySelector(".render"+a).innerHTML="<img src='"+URL.createObjectURL(t)+"' id='img"+a+"' alt='"+i+"'>",URL.createObjectURL(t),document.querySelector("#message"+a).innerHTML="",$this.add(t,i)}};(function ($) { 	$.prototype.ImagePreview = function (options) {    this.each(function(){  defaultOptions ={el:this }; config  = Object.assign({},defaultOptions, options || {});   new 	ImagePreview(config);  });	}})(JaJS);
